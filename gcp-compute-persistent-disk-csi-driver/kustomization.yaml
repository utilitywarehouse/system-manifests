apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
# gcp-compute-persistent-disk-csi-driver puts everything under a namespace
# called `gce-pd-csi-driver` and put Cluster scoped resources under the same
# base. Add an additional overlay to hack the ns and put everything under
# kube-system to play with the method we apply cluster resources via KA
namespace: kube-system

# Use a commit ref instead of tag, as images do not follow tags in the repo
#  manifests.
resources:
  - github.com/kubernetes-sigs/gcp-compute-persistent-disk-csi-driver/deploy/kubernetes/overlays/stable-master?ref=49b50909fb76b0599c2f3a2338998fca84e6402b # v1.9.2

patches:
  - path: csi-gce-pd-controller-patch.yaml
