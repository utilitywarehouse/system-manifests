apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

bases:
  - ../upstream/

patches:
  - patch: |-  # the following rules are only required for L2/ARP mode
      - op: remove
        path: /rules/1  # they need to be specified in this order
      - op: remove
        path: /rules/0  # counterintuitive alternative: /rules/0 twice
    target:
      kind: Role
      name: controller

patchesStrategicMerge:
  - patches/ignore.yaml
  - patches/deploy-controller.yaml
  - patches/ds-speaker.yaml

resources:
  - ds-master-speaker.yaml
