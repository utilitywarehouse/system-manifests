replicaCount: 3
controller:
  controllerOnly: false
kraft:
  enabled: true
  processRoles: broker,controller
  controllerListenerNames: CONTROLLER
existingKraftSecret: kafka-kraft
startupProbe:
  enabled: true
  initialDelaySeconds: 10
overrideConfiguration:
  deleteTopicEnable: true
  autoCreateTopicsEnable: false
  defaultReplicationFactor: 3
  offsetsTopicReplicationFactor: 3
  transactionStateLogReplicationFactor: 3
  transactionStateLogMinIsr: 2
  numIoThreads: 8
  numNetworkThreads: 15
  numPartitions: 15
  numRecoveryThreadsPerDataDir: 8
  # TLS auth
  ssl.client.auth: required
  ssl.endpoint.identification.algorithm: ''
  # per-listener auth
  listener.name.controller.ssl.client.auth: required
  listener.name.client.ssl.client.auth: required
  listener.name.internal.ssl.client.auth: required
  # Authorizer
  authorizer.class.name: "org.apache.kafka.metadata.authorizer.StandardAuthorizer"
  super.users: "User:CN=otel/kafka.otel.svc.cluster.local;User:CN=otel/kafka-tf-applier"
  # Network
  advertised.listeners: "CLIENT://advertised-address-placeholder:9092,INTERNAL://advertised-address-placeholder:9094,CONTROLLER://advertised-address-placeholder:9093"
  # Update the message size limit to 100MB. This must be kept in sync with what the otel collector can send.
  # See this commit: https://github.com/utilitywarehouse/opentelemetry-manifests/commit/600d7e5962d36c58af622a7d54a9df78db4d198a
  message.max.bytes: "104857600"
  replica.fetch.max.bytes: "104857600"
extraEnvVars:
  - name: KAFKA_CFG_MIN_INSYNC_REPLICAS
    value: "2"
service:
  headless:
    publishNotReadyAddresses: true
zookeeper:
  enabled: false
metrics:
  jmx:
    enabled: true
allowEveryoneIfNoAclFound: false
listeners:
  client:
    protocol: SSL
  controller:
    protocol: SSL
  interbroker:
    protocol: SSL
tls:
  type: PEM
  existingSecret: kafka-crt
  passwordsSecret: kafka-tls-passwords
  autoGenerated:
    enabled: false
